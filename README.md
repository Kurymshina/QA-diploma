# __Дипломный проект по профессии «Тестировщик»__

## [Задание](https://github.com/netology-code/qa-diploma.git) 

 Ключевая задача — *автоматизировать позитивные и негативные сценарии покупки тура*

## Документация
* [План автоматизации тестирования](documentation/Plan.md "План автоматизации")
* [Отчётные документы по итогам автоматизированного тестирования](documentation/Summary.md "Отчёт по итогам тестирования")
* [Отчётные документы по итогам автоматизаци](documentation/Report.md "Отчёт об автоматизации")

## Описание приложения
### Бизнес часть
Приложение — это веб-сервис, который предлагает купить тур по определённой цене двумя способами:

* Обычная оплата по дебетовой карте.
* Уникальная технология: выдача кредита по данным банковской карты.


Само приложение не обрабатывает данные по картам, а пересылает их банковским сервисам:

* сервису платежей, далее Payment Gate;
* кредитному сервису, далее Credit Gate.
Приложение в собственной СУБД должно сохранять информацию о том, успешно ли был совершён платёж и каким способом. Данные карт при этом сохранять не допускается.
> В реальной жизни приложение не должно пропускать через себя данные карт, если у него нет PCI DSS
### Техническая часть
Само приложение расположено в файле aqa-shop.jar и запускается стандартным способом java -jar aqa-shop.jar на порту 8080.

В файле application.properties приведён ряд типовых настроек:

* учётные данные и URL для подключения к СУБД;
* URL-адреса банковских сервисов.
### СУБД
Заявлена поддержка двух СУБД. *Необходимо проверить*:

* MySQL;
* PostgreSQL.

Учётные данные и URL для подключения задаются в файле application.properties.
### Банковские сервисы
Доступ к реальным банковским сервисам не даётся, поэтому разработчики подготовили эмулятор банковских сервисов, который может принимать запросы в нужном формате и генерировать ответы.

Эмулятор написан на Node.js, для его запуска рекомендуется использовать Docker. Эмулятор расположен в каталоге gate-simulator.

Эмулятор запускается командой npm start на порту 9999. Он позволяет генерировать предопределённые ответы для заданного набора карт. Набор карт представлен в формате JSON в файле data.json.

> Сделан один сервис, эмулирующий и Payment Gate, и Credit Gate.

*Для формирования окружения буду запускать три контейнера: c MySQL, с PostgreSQL и эмулятором банковских сервисов. 
Все три контейнера опишу в одном файле docker-compose.yml для того чтобы запускать их одновременно.*
![image](https://github.com/Kurymshina/QA-diploma/assets/127852172/e5ab3d89-891e-4a85-a3ac-a6c14795374a)

### Запуск приложения
* Установить и запустить IntelliJ IDEA;
* Установать и запустить Docker Desktop;
* Скопировать репозиторий с Github по ссылке.
* Открыть проект в IntelliJ IDEA.
* Запуск тестового приложения
* Запустить MySQL, PostgreSQL, NodeJS через терминал командой:
> docker-compose up -buid либо docker-compose up -d
* В новой вкладке терминала запустить тестируемое приложение:

Для MySQL:

> java -Dspring.datasource.url=jdbc:mysql://localhost:3306/app -jar artifacts/aqa-shop.jar

Для PostgreSQL:

> java -Dspring.datasource.url=jdbc:postgresql://localhost:5432/app -jar artifacts/aqa-shop.jar.
* Убедиться в готовности системы. Приложение должно быть доступно по адресу:
> http://localhost:8080/
### Запуск тестов
В новой вкладке терминала запустить тесты:

Для MySQL:
> .\gradlew clean test -Ddb.url=jdbc:mysql://localhost:3306/app
Для PostgreSQL:
> .\gradlew clean test -Ddb.url=jdbc:postgresql://localhost:5432/app
### Перезапуск тестов и приложения
Для остановки приложения в окне терминала нужно ввести команду Ctrl+С и повторить необходимые действия из предыдущих разделов.

### Формирование отчёта о тестировании
Предусмотрено формирование отчётности через Allure. Для этого в новой вкладке терминала вводим команду:
> .\gradlew allureServe
